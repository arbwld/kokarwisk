<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Functies Examentraining - Realistische Stijl</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            margin-bottom: 20px;
            text-align: center;
        }

        .header h1 {
            color: #4a5568;
            margin-bottom: 10px;
            font-size: 2.2em;
        }

        .warning {
            background: #fed7d7;
            border: 2px solid #e53e3e;
            color: #c53030;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-weight: bold;
        }

        .paper-reminder {
            background: #f0fff4;
            border: 2px solid #38a169;
            color: #2f855a;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-weight: bold;
        }

        .progress-container {
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background-color: #e2e8f0;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #48bb78, #38a169);
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        .stats {
            display: flex;
            justify-content: space-between;
            font-weight: bold;
            color: #4a5568;
        }

        .level-selector {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .level-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .level-btn {
            padding: 18px 20px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
        }

        .level-btn.basis { background: linear-gradient(45deg, #3182ce, #2b77cb); }
        .level-btn.analyse { background: linear-gradient(45deg, #38a169, #2f855a); }
        .level-btn.toepassing { background: linear-gradient(45deg, #d69e2e, #b7791f); }
        .level-btn.expert { background: linear-gradient(45deg, #e53e3e, #c53030); }

        .level-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .exercise-container {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            margin-bottom: 20px;
            display: none;
        }

        .exercise-container.active {
            display: block;
        }

        .exercise-number {
            background: #4299e1;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 1em;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 15px;
        }

        .exercise-title {
            color: #2d3748;
            font-size: 1.5em;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .exercise-content {
            line-height: 1.7;
            margin-bottom: 25px;
            font-size: 1.1em;
        }

        .math-expression {
            background: #f7fafc;
            padding: 15px 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 1.3em;
            margin: 15px 0;
            border-left: 4px solid #4299e1;
            text-align: center;
        }

        .question-parts {
            background: #edf2f7;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #4a5568;
        }

        .part {
            margin-bottom: 15px;
            font-weight: bold;
        }

        .answer-input {
            width: 100%;
            max-width: 400px;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1.1em;
            margin: 10px 0;
            transition: border-color 0.3s ease;
        }

        .answer-input:focus {
            outline: none;
            border-color: #4299e1;
        }

        .button-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 25px;
        }

        .btn {
            padding: 15px 25px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn.primary {
            background: linear-gradient(45deg, #4299e1, #3182ce);
            color: white;
        }

        .btn.success {
            background: linear-gradient(45deg, #38a169, #2f855a);
            color: white;
        }

        .btn.secondary {
            background: #e2e8f0;
            color: #4a5568;
        }

        .btn.danger {
            background: linear-gradient(45deg, #e53e3e, #c53030);
            color: white;
        }

        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }

        .feedback {
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            font-weight: bold;
            display: none;
        }

        .feedback.correct {
            background: #f0fff4;
            color: #2f855a;
            border: 2px solid #38a169;
        }

        .feedback.incorrect {
            background: #fed7d7;
            color: #c53030;
            border: 2px solid #e53e3e;
        }

        .feedback.thinking {
            background: #fef5e7;
            color: #d69e2e;
            border: 2px solid #d69e2e;
        }

        .table-exercise {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .example-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        .example-table th, .example-table td {
            border: 1px solid #cbd5e0;
            padding: 12px;
            text-align: center;
        }

        .example-table th {
            background: #f7fafc;
            font-weight: bold;
        }

        .graph-instruction {
            background: #e6fffa;
            border: 2px solid #38b2ac;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .multiple-choice {
            display: grid;
            gap: 12px;
            margin: 20px 0;
        }

        .choice-btn {
            padding: 15px 20px;
            border: 2px solid #e2e8f0;
            background: white;
            border-radius: 8px;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1em;
        }

        .choice-btn:hover {
            border-color: #4299e1;
            background: #f7fafc;
        }

        .choice-btn.selected {
            border-color: #4299e1;
            background: #ebf8ff;
        }

        .hint-box {
            background: #fffaf0;
            border: 2px solid #d69e2e;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            display: none;
        }

        .thinking-questions {
            background: #f0f4f8;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #4299e1;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .level-buttons {
                grid-template-columns: 1fr;
            }
            
            .button-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìö Examentraining Functies</h1>
            <p><strong>Echte examenstijl - Geen hulp, alleen denken!</strong></p>
        </div>

        <div class="warning">
            ‚ö†Ô∏è <strong>BELANGRIJKE REGEL:</strong> Net als op het echte examen krijg je GEEN antwoorden! Je moet zelf redeneren en controleren.
        </div>

        <div class="paper-reminder">
            üìù <strong>GEBRUIK PAPIER:</strong> Maak tabellen, grafieken en berekeningen op papier - net zoals op het examen!
        </div>

        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="stats">
                <span>Oefening: <span id="currentExercise">0</span>/<span id="totalExercises">0</span></span>
                <span>Niveau: <span id="currentLevel">Kies een niveau</span></span>
            </div>
        </div>

        <div class="level-selector" id="levelSelector">
            <h3>Kies je niveau - Elk niveau bevat echte examenstijl oefeningen:</h3>
            <div class="level-buttons">
                <button class="level-btn basis" onclick="startLevel('basis')">üìã Basis Kennis<br><small>Variabelen, notatie, eenvoudige berekeningen</small></button>
                <button class="level-btn analyse" onclick="startLevel('analyse')">üîç Analyse & Uitleg<br><small>Domein, bereik, tekenverloop</small></button>
                <button class="level-btn toepassing" onclick="startLevel('toepassing')">‚ö° Toepassingen<br><small>Complexe vraagstukken, modelleren</small></button>
                <button class="level-btn expert" onclick="startLevel('expert')">üî• Expert Niveau<br><small>Samengestelde opgaven, parameters</small></button>
            </div>
        </div>

        <div class="exercise-container" id="exerciseContainer">
            <div class="exercise-number" id="exerciseNumber"></div>
            <div class="exercise-title" id="exerciseTitle"></div>
            <div class="exercise-content" id="exerciseContent"></div>
            <div id="answerSection"></div>
            <div class="feedback" id="feedback"></div>
            <div class="button-group">
                <button class="btn primary" id="checkBtn" onclick="checkAnswer()">Controleer Mijn Antwoord</button>
                <button class="btn secondary" id="hintBtn" onclick="showHint()" style="display: none;">üí° Kleine Hint</button>
                <button class="btn success" id="nextBtn" onclick="nextExercise()" style="display: none;">Volgende Oefening</button>
                <button class="btn danger" id="giveUpBtn" onclick="giveUp()" style="display: none;">Ik Geef Op</button>
                <button class="btn secondary" onclick="showLevelSelector()">Terug naar Niveaus</button>
            </div>
        </div>
    </div>

    <script>
        const exercises = {
            basis: [
                {
                    title: "Afhankelijke en Onafhankelijke Variabelen Herkennen",
                    content: `Thomas en Sarah organiseren een schoolfeest. De kosten voor de zaal zijn ‚Ç¨150 plus ‚Ç¨8 per persoon voor eten en drinken.
                    
                    <div class="thinking-questions">
                        <strong>Denk na over:</strong><br>
                        ‚Ä¢ Wat kun je zelf kiezen/bepalen in deze situatie?<br>
                        ‚Ä¢ Wat gebeurt er automatisch als gevolg van jouw keuze?<br>
                        ‚Ä¢ Welke variabele is de OORZAAK en welke het GEVOLG?
                    </div>`,
                    parts: [
                        "Wat is de onafhankelijke variabele?",
                        "Wat is de afhankelijke variabele?", 
                        "Schrijf de functie k(p) = ..."
                    ],
                    type: "multi_input",
                    answers: ["aantal personen", "kosten", "8p + 150"],
                    hint: "De onafhankelijke variabele is wat JIJ beslist. De afhankelijke variabele hangt af van jouw beslissing."
                },
                {
                    title: "Functienotatie en Berekeningen",
                    content: `Emma koopt fruit op de markt. De prijs hangt af van het gewicht volgens:
                    
                    <div class="math-expression">p(w) = 3,50w + 1,25</div>
                    
                    waarbij p de prijs is in euro en w het gewicht in kilogram.
                    
                    <div class="paper-reminder">üìù Maak deze berekeningen op papier!</div>`,
                    parts: [
                        "Bereken p(2). Wat betekent dit?",
                        "Voor welk gewicht betaal je ‚Ç¨12,00?",
                        "Wat betekent het getal 1,25 in deze formule?"
                    ],
                    type: "multi_input",
                    answers: ["8.25", "3", "basiskosten"],
                    hint: "p(2) betekent: vervang w door 2 in de formule. Voor ‚Ç¨12,00: los op 3,50w + 1,25 = 12."
                },
                {
                    title: "Functie uit Tabel Bepalen",
                    content: `Liam houdt bij hoeveel hij verdient met bijles geven:
                    
                    <div class="table-exercise">
                        <table class="example-table">
                            <tr><th>Aantal uren (u)</th><th>1</th><th>2</th><th>3</th><th>5</th></tr>
                            <tr><th>Verdiend bedrag v(u)</th><th>‚Ç¨22</th><th>‚Ç¨35</th><th>‚Ç¨48</th><th>‚Ç¨74</th></tr>
                        </table>
                    </div>
                    
                    <div class="paper-reminder">üìù Zoek het patroon! Maak berekeningen op papier.</div>`,
                    parts: [
                        "Hoeveel verdient Liam per uur?",
                        "Zijn er opstartkosten? Zo ja, hoeveel?",
                        "Schrijf de functie v(u) = ..."
                    ],
                    type: "multi_input", 
                    answers: ["13", "9", "13u + 9"],
                    hint: "Kijk naar het verschil tussen opeenvolgende bedragen. Check of het lineair is."
                },
                {
                    title: "Recht of Omgekeerd Evenredig?",
                    content: `Gegeven zijn de volgende formules. Bepaal voor elke formule of het verband recht evenredig, omgekeerd evenredig, of geen van beide is.
                    
                    <div class="question-parts">
                        <div class="part">a) f(x) = 120/x</div>
                        <div class="part">b) g(x) = 5x</div>
                        <div class="part">c) h(x) = 2x + 10</div>
                        <div class="part">d) k(x) = 80/x</div>
                    </div>
                    
                    <div class="thinking-questions">
                        <strong>Onthoud:</strong><br>
                        ‚Ä¢ Recht evenredig: y = cx (door de oorsprong)<br>
                        ‚Ä¢ Omgekeerd evenredig: y = c/x<br>
                        ‚Ä¢ Anders: geen van beide
                    </div>`,
                    type: "multiple",
                    choices: [
                        "a) omgekeerd, b) recht, c) geen, d) omgekeerd",
                        "a) recht, b) omgekeerd, c) recht, d) geen", 
                        "a) geen, b) recht, c) omgekeerd, d) recht",
                        "a) omgekeerd, b) geen, c) recht, d) omgekeerd"
                    ],
                    answer: 0,
                    hint: "Let op de vorm van de functie. Staat er alleen cx of c/x, of is er nog iets bij opgeteld?"
                }
            ],
            analyse: [
                {
                    title: "Domein en Bereik Bepalen uit Grafiek",
                    content: `Op de website van een weerstation zie je deze grafiek van de temperatuur tijdens een dag:
                    
                    <div class="graph-instruction">
                        üìà <strong>TEKEN OP PAPIER:</strong><br>
                        Een grafiek waarbij:<br>
                        ‚Ä¢ x-as: tijd van 0 tot 24 uur<br>
                        ‚Ä¢ y-as: temperatuur van -5¬∞C tot 15¬∞C<br>
                        ‚Ä¢ De functie start bij (0, 2), stijgt tot maximum (12, 14), daalt naar (24, 0)<br>
                        ‚Ä¢ De grafiek is een vloeiende curve
                    </div>`,
                    parts: [
                        "Wat is het domein van deze functie?",
                        "Wat is het bereik van deze functie?",
                        "Op welk tijdstip is de temperatuur het hoogst?"
                    ],
                    type: "multi_input",
                    answers: ["[0, 24]", "[-5, 15]", "12"],
                    hint: "Domein = alle mogelijke x-waarden (horizontaal). Bereik = alle mogelijke y-waarden (verticaal)."
                },
                {
                    title: "Nulwaarden en Tekenverloop",
                    content: `De winstfunctie van een startup is:
                    
                    <div class="math-expression">w(t) = -t¬≤ + 8t - 12</div>
                    
                    waarbij w de winst is (√ó ‚Ç¨1000) en t de tijd in maanden.
                    
                    <div class="paper-reminder">üìù Los de vergelijking w(t) = 0 op! Gebruik de abc-formule of ontbinden.</div>`,
                    parts: [
                        "Bereken de nulwaarden (wanneer winst = 0)",
                        "In welke maanden maakt het bedrijf winst?",
                        "In welke maand is de winst maximaal?"
                    ],
                    type: "multi_input",
                    answers: ["2 en 6", "tussen 2 en 6", "4"],
                    hint: "Voor nulwaarden: w(t) = 0. Voor maximum: gebruik symmetrie van parabool of afgeleide."
                },
                {
                    title: "Functieverloop Analyseren",
                    content: `Een bal wordt omhoog gegooid. De hoogte h (in meter) na t seconden is:
                    
                    <div class="math-expression">h(t) = -5t¬≤ + 20t + 1</div>
                    
                    <div class="thinking-questions">
                        <strong>Analyseer stap voor stap:</strong><br>
                        ‚Ä¢ Wat gebeurt er op t = 0?<br>
                        ‚Ä¢ Wanneer raakt de bal de grond?<br>
                        ‚Ä¢ Wat is de maximale hoogte?
                    </div>`,
                    parts: [
                        "Wat is de beginhoogte (t = 0)?",
                        "Na hoeveel seconden is de bal op maximale hoogte?",
                        "Wat is de maximale hoogte?"
                    ],
                    type: "multi_input",
                    answers: ["1", "2", "21"],
                    hint: "Voor maximum: t = -b/(2a). Bereken dan h(t_max)."
                },
                {
                    title: "Domein Bepalen met Beperkingen",
                    content: `Een rechthoekige tuin heeft een omtrek van 60 meter. De breedte is b meter.
                    
                    <div class="math-expression">A(b) = b(30 - b)</div>
                    
                    Deze formule geeft de oppervlakte van de tuin.
                    
                    <div class="thinking-questions">
                        <strong>Denk na:</strong><br>
                        ‚Ä¢ Wat zijn realistische waarden voor de breedte?<br>
                        ‚Ä¢ Kan de breedte 0 zijn? 50 meter?<br>
                        ‚Ä¢ Wat is logisch in deze situatie?
                    </div>`,
                    parts: [
                        "Wat is het mathematische domein?",
                        "Wat is het praktische domein?",
                        "Bij welke breedte is de oppervlakte maximaal?"
                    ],
                    type: "multi_input",
                    answers: ["alle re√´le getallen", "(0, 30)", "15"],
                    hint: "Mathematisch domein = alle mogelijke waarden. Praktisch domein = realistische waarden."
                }
            ],
            toepassing: [
                {
                    title: "Samengesteld Vraagstuk - Evenementenorganisatie",
                    content: `Lisa en Mark organiseren een zomerfestival. Ze hebben de volgende kosten:
                    
                    <div class="question-parts">
                        <div class="part">‚Ä¢ Vaste kosten: ‚Ç¨5000 (podium, vergunningen, etc.)</div>
                        <div class="part">‚Ä¢ Variabele kosten: ‚Ç¨15 per bezoeker (beveiliging, catering)</div>
                        <div class="part">‚Ä¢ Inkomsten: ‚Ç¨25 per ticket</div>
                    </div>
                    
                    <div class="paper-reminder">üìù Stel alle functies op! Maak een tabel en grafiek voor break-even analyse.</div>`,
                    parts: [
                        "Stel de kostenfunctie K(x) op",
                        "Stel de inkomstenfunctie I(x) op", 
                        "Bereken het break-even punt",
                        "Hoeveel winst maken ze bij 800 bezoekers?"
                    ],
                    type: "multi_input",
                    answers: ["15x + 5000", "25x", "500", "3000"],
                    hint: "Break-even: K(x) = I(x). Winst = Inkomsten - Kosten."
                },
                {
                    title: "Optimalisatievraagstuk",
                    content: `Een boer wil een rechthoekige wei afrasteren langs een rivier. Hij heeft 240 meter hekwerk. De rivier vormt √©√©n zijde, dus die hoeft niet afgerasterd.
                    
                    <div class="graph-instruction">
                        üìà <strong>MAAK EEN SCHETS:</strong><br>
                        Teken de situatie en label de zijden. Stel x = breedte loodrecht op rivier.
                    </div>`,
                    parts: [
                        "Druk de lengte uit in x",
                        "Stel de oppervlaktefunctie A(x) op",
                        "Wat is het domein van x?",
                        "Bij welke afmetingen is de oppervlakte maximaal?"
                    ],
                    type: "multi_input", 
                    answers: ["240 - 2x", "x(240 - 2x)", "(0, 120)", "60 bij 120"],
                    hint: "Totaal hekwerk = 2x + lengte = 240. Voor maximum: A'(x) = 0."
                },
                {
                    title: "Modelleren met Kwadratische Functie",
                    content: `Een voetbal wordt geschopt. De baan van de bal wordt beschreven door:
                    
                    <div class="math-expression">h(d) = -0,05d¬≤ + 2d</div>
                    
                    waarbij h de hoogte is in meter en d de horizontale afstand in meter.
                    
                    <div class="thinking-questions">
                        <strong>Analyseer volledig:</strong><br>
                        ‚Ä¢ Waar start en landt de bal?<br>
                        ‚Ä¢ Wat is de maximale hoogte en waar?<br>
                        ‚Ä¢ Hoe ver vliegt de bal?
                    </div>`,
                    parts: [
                        "Op welke afstand landt de bal?",
                        "Wat is de maximale hoogte?",
                        "Op welke afstand bereikt de bal deze hoogte?",
                        "Hoe hoog is de bal op 10 meter afstand?"
                    ],
                    type: "multi_input",
                    answers: ["40", "20", "20", "15"],
                    hint: "Voor landing: h(d) = 0. Voor maximum: symmetrie-as van parabool."
                },
                {
                    title: "Economisch Model - Vraag en Aanbod",
                    content: `Een ijssalon heeft onderzocht dat de vraag naar ijsjes afhangt van de prijs:
                    
                    <div class="math-expression">V(p) = 200 - 5p</div>
                    <div class="math-expression">Omzet = prijs √ó aantal verkocht</div>
                    
                    waarbij V het aantal verkochte ijsjes per dag is en p de prijs per ijsje in euro.
                    
                    <div class="paper-reminder">üìù Stel de omzetfunctie op en analyseer deze!</div>`,
                    parts: [
                        "Stel de omzetfunctie O(p) op",
                        "Bij welke prijs is de omzet maximaal?",
                        "Wat is de maximale omzet?",
                        "Hoeveel ijsjes verkopen ze dan?"
                    ],
                    type: "multi_input",
                    answers: ["p(200 - 5p)", "20", "2000", "100"],
                    hint: "Omzet = prijs √ó aantal = p √ó V(p). Voor maximum: O'(p) = 0."
                }
            ],
            expert: [
                {
                    title: "Parameteranalyse",
                    content: `Gegeven is de functie:
                    
                    <div class="math-expression">f(x) = ax¬≤ + bx + c</div>
                    
                    Met de voorwaarden: f(0) = 3, f(1) = 6, en f(2) = 5.
                    
                    <div class="thinking-questions">
                        <strong>Los systematisch op:</strong><br>
                        ‚Ä¢ Gebruik de voorwaarden om vergelijkingen op te stellen<br>
                        ‚Ä¢ Los het stelsel op voor a, b, en c<br>
                        ‚Ä¢ Controleer je antwoord
                    </div>`,
                    parts: [
                        "Bepaal de waarde van c",
                        "Bepaal de waarde van a", 
                        "Bepaal de waarde van b",
                        "Schrijf de complete functie"
                    ],
                    type: "multi_input",
                    answers: ["3", "-2", "5", "-2x¬≤ + 5x + 3"],
                    hint: "f(0) = c geeft direct c. Stel vergelijkingen op voor f(1) en f(2) om a en b te vinden."
                },
                {
                    title: "Samengestelde Functieanalyse",
                    content: `Een bedrijf heeft twee afdelingen. Hun winstfuncties zijn:
                    
                    <div class="math-expression">A(t) = 2t¬≥ - 12t¬≤ + 18t</div>
                    <div class="math-expression">B(t) = -t¬≤ + 8t + 20</div>
                    
                    waarbij t de tijd in maanden is en de winst in duizenden euro's.
                    
                    <div class="paper-reminder">üìù Bereken afgeleiden! Analyseer extremen en gedrag.</div>`,
                    parts: [
                        "In welke maand heeft afdeling A maximum winst?",
                        "Wat is de winst van afdeling B in maand 3?",
                        "In welke maand is de totale winst A(t) + B(t) gelijk aan ‚Ç¨50.000?",
                        "Welke afdeling groeit sneller in maand 2?"
                    ],
                    type: "multi_input",
                    answers: ["3", "35", "4", "A"],
                    hint: "Voor extremen: A'(t) = 0. Voor groei: vergelijk A'(2) en B'(2)."
                },
                {
                    title: "Rationaal Functieonderzoek",
                    content: `Onderzoek de functie:
                    
                    <div class="math-expression">g(x) = (x¬≤ - 4)/(x + 2)</div>
                    
                    <div class="thinking-questions">
                        <strong>Volledig onderzoek:</strong><br>
                        ‚Ä¢ Domein en asymptoten<br>
                        ‚Ä¢ Vereenvoudiging (als mogelijk)<br>
                        ‚Ä¢ Nulwaarden en tekenverloop<br>
                        ‚Ä¢ Grafiekgedrag
                    </div>`,
                    parts: [
                        "Voor welke x-waarde is g(x) niet gedefinieerd?",
                        "Vereenvoudig g(x) (na wegdelen)",
                        "Wat is de nulwaarde van g(x)?", 
                        "Wat gebeurt er bij x = -2?"
                    ],
                    type: "multi_input",
                    answers: ["-2", "x - 2", "2", "gat in grafiek"],
                    hint: "Factor eerst de teller. Let op: x¬≤ - 4 = (x-2)(x+2). Er valt weg!"
                },
                {
                    title: "Complexe Modelleringsopdracht",
                    content: `Een watreservoir heeft een inlaat en uitlaat. De waterinhoud W (in m¬≥) hangt af van de tijd t (in uren) volgens:
                    
                    <div class="math-expression">W(t) = 1000 + 50t - 2t¬≤</div>
                    
                    voor 0 ‚â§ t ‚â§ 24.
                    
                    <div class="paper-reminder">üìù Maak een volledige analyse: grafiek, extremen, praktische betekenis!</div>`,
                    parts: [
                        "Hoeveel water zit er initieel in het reservoir?",
                        "Op welk tijdstip is de waterinhoud maximaal?",
                        "Wat is de maximale waterinhoud?",
                        "Na hoeveel uur is het reservoir leeg?"
                    ],
                    type: "multi_input",
                    answers: ["1000", "12.5", "1312.5", "25"],
                    hint: "Voor maximum: W'(t) = 0. Voor leeg: W(t) = 0. Let op het domein!"
                }
            ]
        };

        let currentLevel = '';
        let currentExerciseIndex = 0;
        let attempts = 0;
        let selectedAnswer = null;

        function startLevel(level) {
            currentLevel = level;
            currentExerciseIndex = 0;
            attempts = 0;
            
            const levelNames = {
                'basis': 'Basis Kennis',
                'analyse': 'Analyse & Uitleg', 
                'toepassing': 'Toepassingen',
                'expert': 'Expert Niveau'
            };
            
            document.getElementById('currentLevel').textContent = levelNames[level];
            document.getElementById('totalExercises').textContent = exercises[level].length;
            updateProgress();
            
            document.getElementById('levelSelector').style.display = 'none';
            document.getElementById('exerciseContainer').classList.add('active');
            
            loadExercise();
        }

        function loadExercise() {
            const exercise = exercises[currentLevel][currentExerciseIndex];
            attempts = 0;
            
            document.getElementById('exerciseNumber').textContent = `Oefening ${currentExerciseIndex + 1}`;
            document.getElementById('exerciseTitle').textContent = exercise.title;
            document.getElementById('exerciseContent').innerHTML = exercise.content;
            
            const answerSection = document.getElementById('answerSection');
            selectedAnswer = null;
            
            if (exercise.type === 'multi_input') {
                let inputsHtml = '<div class="question-parts">';
                exercise.parts.forEach((part, index) => {
                    inputsHtml += `
                        <div class="part">
                            <strong>${String.fromCharCode(97 + index)}) ${part}</strong><br>
                            <input type="text" class="answer-input" id="answer${index}" placeholder="Typ je antwoord...">
                        </div>
                    `;
                });
                inputsHtml += '</div>';
                answerSection.innerHTML = inputsHtml;
            } else if (exercise.type === 'multiple') {
                let choicesHtml = '<div class="multiple-choice">';
                exercise.choices.forEach((choice, index) => {
                    choicesHtml += `<button class="choice-btn" onclick="selectChoice(${index})">${choice}</button>`;
                });
                choicesHtml += '</div>';
                answerSection.innerHTML = choicesHtml;
            }
            
            // Reset buttons
            document.getElementById('feedback').style.display = 'none';
            document.getElementById('checkBtn').style.display = 'inline-block';
            document.getElementById('hintBtn').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('giveUpBtn').style.display = 'none';
            
            // Hide hint box
            const hintBox = document.querySelector('.hint-box');
            if (hintBox) hintBox.style.display = 'none';
        }

        function selectChoice(index) {
            selectedAnswer = index;
            document.querySelectorAll('.choice-btn').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
        }

        function checkAnswer() {
            const exercise = exercises[currentLevel][currentExerciseIndex];
            const feedback = document.getElementById('feedback');
            attempts++;
            
            let userAnswers = [];
            let allCorrect = true;
            
            if (exercise.type === 'multi_input') {
                exercise.parts.forEach((_, index) => {
                    const input = document.getElementById(`answer${index}`);
                    const userAnswer = input.value.trim().toLowerCase();
                    const correctAnswer = exercise.answers[index].toLowerCase();
                    userAnswers.push(userAnswer);
                    
                    if (userAnswer !== correctAnswer) {
                        allCorrect = false;
                        input.style.borderColor = '#e53e3e';
                    } else {
                        input.style.borderColor = '#38a169';
                    }
                });
            } else if (exercise.type === 'multiple') {
                allCorrect = selectedAnswer === exercise.answer;
            }
            
            if (allCorrect) {
                feedback.className = 'feedback correct';
                feedback.innerHTML = `
                    <strong>üéâ Excellent! Volledig correct!</strong><br>
                    Je hebt dit in ${attempts} poging${attempts > 1 ? 'en' : ''} opgelost. 
                    ${attempts === 1 ? 'Perfect - eerste keer goed!' : 'Goed blijven proberen!'}
                `;
                feedback.style.display = 'block';
                
                document.getElementById('checkBtn').style.display = 'none';
                document.getElementById('nextBtn').style.display = 'inline-block';
                document.getElementById('hintBtn').style.display = 'none';
                document.getElementById('giveUpBtn').style.display = 'none';
                
            } else {
                feedback.className = 'feedback incorrect';
                feedback.innerHTML = `
                    <strong>‚ùå Niet helemaal goed.</strong><br>
                    ${exercise.type === 'multi_input' ? 'Controleer de delen met een rode rand.' : 'Probeer opnieuw.'}
                    <br><em>Denk stap voor stap na en controleer je berekeningen.</em>
                `;
                feedback.style.display = 'block';
                
                if (attempts >= 2) {
                    document.getElementById('hintBtn').style.display = 'inline-block';
                }
                if (attempts >= 3) {
                    document.getElementById('giveUpBtn').style.display = 'inline-block';
                }
            }
        }

        function showHint() {
            const exercise = exercises[currentLevel][currentExerciseIndex];
            const feedback = document.getElementById('feedback');
            
            feedback.className = 'feedback thinking';
            feedback.innerHTML = `
                <strong>üí° Hint:</strong><br>
                ${exercise.hint}
                <br><br><em>Probeer nu opnieuw met deze aanwijzing!</em>
            `;
            
            document.getElementById('hintBtn').style.display = 'none';
        }

        function giveUp() {
            const exercise = exercises[currentLevel][currentExerciseIndex];
            const feedback = document.getElementById('feedback');
            
            feedback.className = 'feedback incorrect';
            feedback.innerHTML = `
                <strong>ü§î Ok√©, laten we doorgaan.</strong><br>
                Dit was een moeilijke vraag. Kijk na het examen de uitwerking na in je boek of vraag je docent.<br>
                <em>Niet opgeven - de volgende ga je vast wel goed!</em>
            `;
            
            document.getElementById('checkBtn').style.display = 'none';
            document.getElementById('hintBtn').style.display = 'none';
            document.getElementById('giveUpBtn').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'inline-block';
        }

        function nextExercise() {
            currentExerciseIndex++;
            
            if (currentExerciseIndex >= exercises[currentLevel].length) {
                showFinalResults();
            } else {
                loadExercise();
                updateProgress();
            }
        }

        function showFinalResults() {
            document.getElementById('exerciseContent').innerHTML = `
                <div style="text-align: center; padding: 40px;">
                    <h2>üéØ Niveau "${document.getElementById('currentLevel').textContent}" Voltooid!</h2>
                    <p style="font-size: 1.3em; margin: 25px 0; color: #4a5568;">
                        Je hebt alle oefeningen van dit niveau doorlopen!
                    </p>
                    <div class="paper-reminder">
                        üìö <strong>Volgende stap:</strong> Controleer je antwoorden in je boek, 
                        bespreek moeilijke onderdelen met je docent, en probeer een hoger niveau!
                    </div>
                    <p style="font-size: 1.1em; color: #2d3748; margin-top: 20px;">
                        <strong>Onthoud:</strong> Echte examens geven ook geen directe antwoorden. 
                        Je bent goed bezig met deze manier van oefenen! üí™
                    </p>
                </div>
            `;
            
            document.getElementById('answerSection').innerHTML = '';
            document.getElementById('feedback').style.display = 'none';
            document.getElementById('checkBtn').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('hintBtn').style.display = 'none';
            document.getElementById('giveUpBtn').style.display = 'none';
        }

        function updateProgress() {
            const total = exercises[currentLevel]?.length || 1;
            const current = currentExerciseIndex;
            const percentage = (current / total) * 100;
            
            document.getElementById('progressFill').style.width = percentage + '%';
            document.getElementById('currentExercise').textContent = current + 1;
        }

        function showLevelSelector() {
            document.getElementById('levelSelector').style.display = 'block';
            document.getElementById('exerciseContainer').classList.remove('active');
        }

        // Enter key support
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && document.getElementById('checkBtn').style.display !== 'none') {
                checkAnswer();
            }
        });
    </script>
</body>
</html>
